<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒ“ãƒ³ã‚´ - ãƒ›ã‚¹ãƒˆç”»é¢</title>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: background 0.3s;
    }

    body.party {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    body.dark {
      background: #1a1a2e;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 20px;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    /* 2Ã—2ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
    .grid-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      grid-template-rows: auto 2fr 1fr;
      gap: 20px;
      height: calc(100vh - 150px);
    }

    .grid-item {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      overflow-y: auto;
    }

    /* ã‚¹ãƒ­ãƒƒãƒˆã‚’2å€ã®é«˜ã•ã« */
    .slot-container {
      grid-row: span 2;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    /* QRã‚³ãƒ¼ãƒ‰ã¯å³ä¸Šï¼ˆå½±éŸ¿ãªã—ï¼‰ */
    .qr-section {
      text-align: center;
    }

    /* å±¥æ­´ã¯æœ€å°é™ã®é«˜ã• */
    .history-section {
      grid-row: 3;
    }

    /* å‚åŠ è€…ã¯å³ä¸‹ï¼ˆæ®‹ã‚Šã®é«˜ã•ï¼‰ */
    .players-section {
      grid-row: 2 / 4;
    }

    .qr-section h3 {
      color: #667eea;
      margin-bottom: 10px;
    }

    .qr-trademark {
      font-size: 0.75em;
      color: #999;
      margin-top: 5px;
    }

    #qrcode {
      margin: 20px auto;
    }

    .slot-container {
      text-align: center;
    }

    .slot-display {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      font-size: 4em;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 30px;
      min-height: 120px;
    }

    .slot-item {
      animation: spin 0.3s ease-in-out;
      min-width: 1.2em;
      text-align: center;
      display: inline-block;
    }

    @keyframes spin {
      0% { transform: translateY(-20px); opacity: 0; }
      100% { transform: translateY(0); opacity: 1; }
    }

    .result {
      font-size: 1.1em;
      color: #ff6b6b;
      font-weight: bold;
      min-width: 3.5em;
      text-align: left;
      display: inline-block;
    }

    .pick-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 20px 60px;
      font-size: 1.5em;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .pick-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }

    .pick-button:active {
      transform: translateY(0);
    }

    .pick-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      align-items: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .control-button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      transition: background 0.2s;
    }

    .animation-delay-control {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 15px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 8px;
    }

    .animation-delay-control label {
      font-weight: bold;
      color: #333;
    }

    .animation-delay-control input {
      width: 80px;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      text-align: center;
    }

    .animation-delay-control span {
      color: #666;
    }

    .reset-button {
      background: #ff6b6b;
      color: white;
    }

    .theme-button {
      background: #4ecdc4;
      color: white;
    }

    .players-section {
    }

    .players-section h2 {
      color: #667eea;
      margin-bottom: 15px;
    }

    .player-list {
      list-style: none;
    }

    .player-item {
      padding: 10px;
      margin: 5px 0;
      background: #f8f9fa;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .player-status {
      font-weight: bold;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9em;
    }

    .status-reach {
      background: #ffd93d;
      color: #333;
    }

    .status-bingo {
      background: #6bcf7f;
      color: white;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .history-section {
    }

    .history-section h2 {
      color: #667eea;
      margin-bottom: 15px;
    }

    .history-numbers {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      font-size: 1.5em;
      font-weight: bold;
      color: #333;
    }

    .history-number {
      min-width: 50px;
      text-align: center;
    }

    .remaining {
      margin-top: 15px;
      font-size: 1.2em;
      color: #666;
    }

    .bingo-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: linear-gradient(135deg, #6bcf7f 0%, #4caf50 100%);
      color: white;
      padding: 40px 60px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
      z-index: 2000;
      text-align: center;
      animation: popupShow 0.5s ease-out forwards;
    }

    .reach-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: linear-gradient(135deg, #ffd93d 0%, #ffaa00 100%);
      color: #333;
      padding: 30px 50px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
      z-index: 2000;
      text-align: center;
      animation: popupShow 0.5s ease-out forwards;
    }

    @keyframes popupShow {
      0% {
        transform: translate(-50%, -50%) scale(0) rotate(-180deg);
        opacity: 0;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.1) rotate(10deg);
      }
      100% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        opacity: 1;
      }
    }

    .bingo-popup h2 {
      font-size: 3em;
      margin-bottom: 20px;
      animation: bounce 0.5s ease-in-out infinite;
    }

    .reach-popup h2 {
      font-size: 2.5em;
      margin-bottom: 15px;
      animation: bounce 0.5s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .bingo-popup p {
      font-size: 2em;
      font-weight: bold;
    }

    .reach-popup p {
      font-size: 1.8em;
      font-weight: bold;
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: #f0f;
      position: absolute;
      animation: confetti-fall 3s linear forwards;
      z-index: 1999;
    }

    @keyframes confetti-fall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1998;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @media (max-width: 768px) {
      .grid-container {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto auto;
        height: auto;
      }

      .slot-display {
        font-size: 2.5em;
        gap: 10px;
      }

      .result {
        font-size: 2em;
      }

      .pick-button {
        padding: 15px 40px;
        font-size: 1.2em;
      }

      .history-numbers {
        font-size: 1.2em;
        gap: 10px;
      }

      .bingo-popup h2 {
        font-size: 2em;
      }

      .bingo-popup p {
        font-size: 1.5em;
      }

      .reach-popup h2 {
        font-size: 1.8em;
      }

      .reach-popup p {
        font-size: 1.3em;
      }
    }
  </style>
</head>
<body class="party">
  <div class="container">
    <div class="header">
      <h1>ğŸ‰ ãƒ“ãƒ³ã‚´æ•°å­—ãƒ”ãƒƒã‚¯ ğŸ‰</h1>
    </div>

    <div class="grid-container">
      <!-- å·¦ä¸Š: ã‚¹ãƒ­ãƒƒãƒˆ -->
      <div class="grid-item slot-container">
        <div class="slot-display" id="slotDisplay">
          <span>?</span>
          <span>?</span>
          <span>?</span>
          <span class="result" id="result">= ??</span>
        </div>
        <button class="pick-button" id="pickButton">æ•°å­—ã‚’ãƒ”ãƒƒã‚¯</button>
        <div class="controls">
          <div class="animation-delay-control">
            <label for="animationDelay">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–“éš”:</label>
            <input type="number" id="animationDelay" min="100" max="2000" step="100" value="500" title="100ï½2000msã®ç¯„å›²ã§è¨­å®šã§ãã¾ã™">
            <span>ms</span>
          </div>
          <button class="control-button reset-button" id="resetButton">ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ</button>
          <button class="control-button theme-button" id="themeButton">ãƒ†ãƒ¼ãƒåˆ‡æ›¿</button>
        </div>
      </div>

      <!-- å³ä¸Š: QRã‚³ãƒ¼ãƒ‰ -->
      <div class="grid-item qr-section">
        <h3>ã‚¹ãƒãƒ›ã§QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã£ã¦å‚åŠ </h3>
        <p class="qr-trademark">â€»QRã‚³ãƒ¼ãƒ‰ã¯æ ªå¼ä¼šç¤¾ãƒ‡ãƒ³ã‚½ãƒ¼ã‚¦ã‚§ãƒ¼ãƒ–ã®ç™»éŒ²å•†æ¨™ã§ã™ã€‚</p>
        <div id="qrcode"></div>
        <div id="url"></div>
      </div>

      <!-- å·¦ä¸‹: å±¥æ­´ -->
      <div class="grid-item history-section">
        <h2>å±¥æ­´</h2>
        <div class="history-numbers" id="historyNumbers"></div>
        <div class="remaining" id="remaining">æ®‹ã‚Š: 75å€‹</div>
      </div>

      <!-- å³ä¸‹: å‚åŠ è€… -->
      <div class="grid-item players-section">
        <h2>å‚åŠ è€… (<span id="playerCount">0</span>äºº)</h2>
        <ul class="player-list" id="playerList"></ul>
      </div>
    </div>
  </div>

  <script>
    const socket = io();
    const sessionId = 'default';
    let currentTheme = 'party';
    let isAnimating = false;

    // éŸ³å£°è¦ç´ ã®ä½œæˆ
    const slotSound = new Audio('/sounds/empty-machine-gun-firing-clicks-341988.mp3');
    slotSound.loop = true;
    const resultSound = new Audio('/sounds/cash-register-purchase-87313.mp3');
    const reachSound = new Audio('/sounds/notification-22-270130.mp3');
    const bingoSound = new Audio('/sounds/loud-fanfare-trumpet-effect-02-412049.mp3');

    socket.emit('join_session', { sessionId, isHost: true });

    // QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
    fetch(`/api/qr/${sessionId}`)
      .then(res => res.json())
      .then(data => {
        const img = document.createElement('img');
        img.src = data.qrCode;
        img.style.maxWidth = '200px';
        document.getElementById('qrcode').appendChild(img);
        document.getElementById('url').textContent = data.url;
      });

    // ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹å—ä¿¡
    socket.on('session_state', (session) => {
      updateHistory(session.pickedNumbers);
      updatePlayers(session.players);
      currentTheme = session.theme;
      document.body.className = currentTheme;
    });

    // æ•°å­—ãƒ”ãƒƒã‚¯
    document.getElementById('pickButton').addEventListener('click', () => {
      if (!isAnimating) {
        const delay = parseInt(document.getElementById('animationDelay').value) || 500;
        socket.emit('pick_number', { animationDelay: delay });
      }
    });

    // æ•°å­—ãƒ”ãƒƒã‚¯å—ä¿¡
    socket.on('number_picked', async (data) => {
      isAnimating = true;
      document.getElementById('pickButton').disabled = true;
      
      const { calculation, pickedNumbers, remaining, animationDelay = 500 } = data;
      
      // çµæœè¡¨ç¤ºã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
      document.getElementById('result').textContent = '= ??';
      
      // ã‚¹ãƒ­ãƒƒãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆéŸ³å£°ä»˜ãï¼‰
      await animateSlotSequential(calculation, animationDelay);
      
      // çµæœè¡¨ç¤º
      document.getElementById('result').textContent = `= ${calculation.result}`;
      
      // å±¥æ­´æ›´æ–°
      updateHistory(pickedNumbers);
      document.getElementById('remaining').textContent = `æ®‹ã‚Š: ${remaining}å€‹`;
      
      setTimeout(() => {
        isAnimating = false;
        document.getElementById('pickButton').disabled = false;
      }, 1000);
    });

    async function animateSlotSequential(calc, delay) {
      const display = document.getElementById('slotDisplay');
      
      // ã‚¹ãƒ­ãƒƒãƒˆå›è»¢éŸ³ã‚’å†ç”Ÿ
      slotSound.currentTime = 0;
      slotSound.play().catch(e => console.log('éŸ³å£°å†ç”Ÿã‚¨ãƒ©ãƒ¼:', e));
      
      // åˆæœŸçŠ¶æ…‹: ã™ã¹ã¦ã€Œ?ã€ã«ãƒªã‚»ãƒƒãƒˆ
      display.innerHTML = `
        <span class="slot-item" id="slot-x">?</span>
        <span class="slot-item" id="slot-op">?</span>
        <span class="slot-item" id="slot-z">?</span>
        <span class="result" id="result">= ??</span>
      `;
      
      // 1. å·¦ã®æ•°å­—ã‚’è¨­å®šæ™‚é–“ãƒ©ãƒ³ãƒ€ãƒ è¡¨ç¤ºã—ã¦ã‹ã‚‰ç¢ºå®š
      const startTime1 = Date.now();
      while (Date.now() - startTime1 < delay) {
        document.getElementById('slot-x').textContent = Math.floor(Math.random() * 75) + 1;
        await sleep(50);
      }
      document.getElementById('slot-x').textContent = calc.x;
      await sleep(100);
      
      // 2. æ¼”ç®—å­ã‚’è¨­å®šæ™‚é–“ãƒ©ãƒ³ãƒ€ãƒ è¡¨ç¤ºã—ã¦ã‹ã‚‰ç¢ºå®š
      const startTime2 = Date.now();
      while (Date.now() - startTime2 < delay) {
        document.getElementById('slot-op').textContent = ['+', '-', 'Ã—', 'Ã·'][Math.floor(Math.random() * 4)];
        await sleep(50);
      }
      document.getElementById('slot-op').textContent = calc.operator;
      await sleep(100);
      
      // 3. å³ã®æ•°å­—ã‚’è¨­å®šæ™‚é–“ãƒ©ãƒ³ãƒ€ãƒ è¡¨ç¤ºã—ã¦ã‹ã‚‰ç¢ºå®š
      const startTime3 = Date.now();
      while (Date.now() - startTime3 < delay) {
        document.getElementById('slot-z').textContent = Math.floor(Math.random() * 75) + 1;
        await sleep(50);
      }
      document.getElementById('slot-z').textContent = calc.z;
      await sleep(100);
      
      // ã‚¹ãƒ­ãƒƒãƒˆéŸ³ã‚’åœæ­¢
      slotSound.pause();
      
      // çµæœç¢ºå®šéŸ³ã‚’å†ç”Ÿ
      resultSound.currentTime = 0;
      resultSound.play().catch(e => console.log('éŸ³å£°å†ç”Ÿã‚¨ãƒ©ãƒ¼:', e));
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    // HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—é–¢æ•°
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function updateHistory(numbers) {
      const historyDiv = document.getElementById('historyNumbers');
      historyDiv.innerHTML = numbers.slice().reverse().map(n => 
        `<span class="history-number">${n}</span>`
      ).join('');
    }

    function updatePlayers(players) {
      const list = document.getElementById('playerList');
      document.getElementById('playerCount').textContent = players.length;
      
      list.innerHTML = players.map(p => `
        <li class="player-item">
          <span>${escapeHtml(p.name)}</span>
          ${p.status ? `<span class="player-status status-${p.status}">${p.status === 'reach' ? 'ãƒªãƒ¼ãƒ!' : 'ãƒ“ãƒ³ã‚´!'}</span>` : ''}
        </li>
      `).join('');
    }

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‚åŠ 
    socket.on('player_joined', (player) => {
      socket.emit('join_session', { sessionId, isHost: true });
    });

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é›¢è„±
    socket.on('player_left', (data) => {
      socket.emit('join_session', { sessionId, isHost: true });
    });

    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´
    socket.on('player_status_changed', (data) => {
      // ãƒ“ãƒ³ã‚´æ™‚ã«ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
      if (data.status === 'bingo') {
        showBingoPopup(data.name);
        // ãƒ“ãƒ³ã‚´éŸ³ã‚’å†ç”Ÿ
        bingoSound.currentTime = 0;
        bingoSound.play().catch(e => console.log('éŸ³å£°å†ç”Ÿã‚¨ãƒ©ãƒ¼:', e));
      } else if (data.status === 'reach') {
        // ãƒªãƒ¼ãƒãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
        showReachPopup(data.name);
        // ãƒªãƒ¼ãƒéŸ³ã‚’å†ç”Ÿ
        reachSound.currentTime = 0;
        reachSound.play().catch(e => console.log('éŸ³å£°å†ç”Ÿã‚¨ãƒ©ãƒ¼:', e));
      }
      socket.emit('join_session', { sessionId, isHost: true });
    });

    // ãƒªã‚»ãƒƒãƒˆ
    document.getElementById('resetButton').addEventListener('click', () => {
      if (confirm('ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹?')) {
        socket.emit('reset_game');
      }
    });

    socket.on('game_reset', () => {
      document.getElementById('result').textContent = '';
      document.getElementById('slotDisplay').innerHTML = '<span>?</span><span>?</span><span>?</span>';
      updateHistory([]);
      document.getElementById('remaining').textContent = 'æ®‹ã‚Š: 75å€‹';
      socket.emit('join_session', { sessionId, isHost: true });
    });

    // ãƒ†ãƒ¼ãƒåˆ‡æ›¿
    document.getElementById('themeButton').addEventListener('click', () => {
      currentTheme = currentTheme === 'party' ? 'dark' : 'party';
      socket.emit('theme_change', { theme: currentTheme });
    });

    socket.on('theme_changed', (data) => {
      currentTheme = data.theme;
      document.body.className = currentTheme;
    });

    // ã‚²ãƒ¼ãƒ å®Œäº†
    socket.on('game_complete', () => {
      alert('å…¨ã¦ã®æ•°å­—ãŒå‡ºã¾ã—ãŸ!');
    });

    // ãƒ“ãƒ³ã‚´ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
    function showBingoPopup(playerName) {
      // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ä½œæˆ
      const overlay = document.createElement('div');
      overlay.className = 'overlay';
      document.body.appendChild(overlay);

      // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ä½œæˆ
      const popup = document.createElement('div');
      popup.className = 'bingo-popup';
      popup.innerHTML = `
        <h2>ğŸ‰ BINGO! ğŸ‰</h2>
        <p>${escapeHtml(playerName)} ã•ã‚“</p>
      `;
      document.body.appendChild(popup);

      // ã‚¯ãƒ©ãƒƒã‚«ãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
      createConfetti();

      // 3ç§’å¾Œã«è‡ªå‹•ã§é–‰ã˜ã‚‹
      setTimeout(() => {
        popup.style.animation = 'popupShow 0.3s ease-in reverse';
        overlay.style.animation = 'fadeIn 0.3s ease-in reverse';
        setTimeout(() => {
          popup.remove();
          overlay.remove();
        }, 300);
      }, 3000);

      // ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
      overlay.addEventListener('click', () => {
        popup.remove();
        overlay.remove();
      });
    }

    // ãƒªãƒ¼ãƒãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
    function showReachPopup(playerName) {
      // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ä½œæˆ
      const overlay = document.createElement('div');
      overlay.className = 'overlay';
      document.body.appendChild(overlay);

      // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ä½œæˆ
      const popup = document.createElement('div');
      popup.className = 'reach-popup';
      popup.innerHTML = `
        <h2>âš¡ REACH! âš¡</h2>
        <p>${escapeHtml(playerName)} ã•ã‚“</p>
      `;
      document.body.appendChild(popup);

      // 2ç§’å¾Œã«è‡ªå‹•ã§é–‰ã˜ã‚‹
      setTimeout(() => {
        popup.style.animation = 'popupShow 0.3s ease-in reverse';
        overlay.style.animation = 'fadeIn 0.3s ease-in reverse';
        setTimeout(() => {
          popup.remove();
          overlay.remove();
        }, 300);
      }, 2000);

      // ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
      overlay.addEventListener('click', () => {
        popup.remove();
        overlay.remove();
      });
    }

    // ç´™å¹é›ªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
    function createConfetti() {
      const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#ffd93d', '#6bcf7f', '#a29bfe'];
      const confettiCount = 50;

      for (let i = 0; i < confettiCount; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.top = '-10px';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.width = Math.random() * 10 + 5 + 'px';
        confetti.style.height = confetti.style.width;
        confetti.style.animationDelay = Math.random() * 0.5 + 's';
        confetti.style.animationDuration = Math.random() * 2 + 2 + 's';
        
        document.body.appendChild(confetti);

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã«å‰Šé™¤
        confetti.addEventListener('animationend', () => {
          confetti.remove();
        });
      }
    }
  </script>
</body>
</html>
